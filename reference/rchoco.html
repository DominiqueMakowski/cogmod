<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Choice-Confidence (CHOCO) Model — rchoco • cogmod</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Choice-Confidence (CHOCO) Model — rchoco"><meta name="description" content='The Choice-Confidence (CHOCO) model is useful to model data from subjective ratings,
such as Likert-type or analog scales, in which the left and the right side correspond
to different processes or higher order categorical responses (e.g., "disagree" vs.
"agree", "true" vs. "false"). They can be used to jointly model the choice
between two underlying categories (e.g., "disagree" vs. "agree") along with a degree
of confidence or intensity.
The CHOCO model conceptualizes the response scale as being divided at a threshold (typically
at 0.5, i.e., the middle point of the scale). Responses below the threshold are modeled by one
Beta-Extreme (BEXT) distribution, and responses above the threshold are modeled
by a separate, mirrored BEXT distribution. The relative proportions of data on the left and right
sides of the threshold are controlled by the p parameter, which indicates the probability of
observing a response on the right side of the threshold. There is also a point mass probability
(pmid) for responses exactly at the threshold.'><meta property="og:description" content='The Choice-Confidence (CHOCO) model is useful to model data from subjective ratings,
such as Likert-type or analog scales, in which the left and the right side correspond
to different processes or higher order categorical responses (e.g., "disagree" vs.
"agree", "true" vs. "false"). They can be used to jointly model the choice
between two underlying categories (e.g., "disagree" vs. "agree") along with a degree
of confidence or intensity.
The CHOCO model conceptualizes the response scale as being divided at a threshold (typically
at 0.5, i.e., the middle point of the scale). Responses below the threshold are modeled by one
Beta-Extreme (BEXT) distribution, and responses above the threshold are modeled
by a separate, mirrored BEXT distribution. The relative proportions of data on the left and right
sides of the threshold are controlled by the p parameter, which indicates the probability of
observing a response on the right side of the threshold. There is also a point mass probability
(pmid) for responses exactly at the threshold.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cogmod</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="nav-link" href="https://github.com/DominiqueMakowski/cogmod/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Choice-Confidence (CHOCO) Model</h1>
      <small class="dont-index">Source: <a href="https://github.com/DominiqueMakowski/cogmod/blob/main/R/choco.R"><code>R/choco.R</code></a>, <a href="https://github.com/DominiqueMakowski/cogmod/blob/main/R/choco_brms.R"><code>R/choco_brms.R</code></a></small>
      <div class="d-none name"><code>rchoco.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The Choice-Confidence (CHOCO) model is useful to model data from subjective ratings,
such as Likert-type or analog scales, in which the left and the right side correspond
to different processes or higher order categorical responses (e.g., "disagree" vs.
"agree", "true" vs. "false"). They can be used to jointly model the choice
between two underlying categories (e.g., "disagree" vs. "agree") along with a degree
of confidence or intensity.</p>
<p>The CHOCO model conceptualizes the response scale as being divided at a <code>threshold</code> (typically
at 0.5, i.e., the middle point of the scale). Responses below the threshold are modeled by one
<a href="rbext.html">Beta-Extreme (BEXT)</a> distribution, and responses above the threshold are modeled
by a separate, mirrored BEXT distribution. The relative proportions of data on the left and right
sides of the threshold are controlled by the <code>p</code> parameter, which indicates the probability of
observing a response on the right side of the threshold. There is also a point mass probability
(<code>pmid</code>) for responses exactly at the <code>threshold</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">rchoco</span><span class="op">(</span></span>
<span>  <span class="va">n</span>,</span>
<span>  p <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  muleft <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  mudelta <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  phileft <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  phidelta <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  pex <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  bex <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  pmid <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0.5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dchoco</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  p <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  muleft <span class="op">=</span> <span class="fl">0.3</span>,</span>
<span>  mudelta <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  phileft <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  phidelta <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  pex <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  bex <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  pmid <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">choco_lpdf_expose</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">choco_stanvars</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">choco</span><span class="op">(</span></span>
<span>  link_mu <span class="op">=</span> <span class="st">"logit"</span>,</span>
<span>  link_muleft <span class="op">=</span> <span class="st">"logit"</span>,</span>
<span>  link_mudelta <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  link_phileft <span class="op">=</span> <span class="st">"softplus"</span>,</span>
<span>  link_phidelta <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  link_pex <span class="op">=</span> <span class="st">"logit"</span>,</span>
<span>  link_bex <span class="op">=</span> <span class="st">"logit"</span>,</span>
<span>  link_pmid <span class="op">=</span> <span class="st">"logit"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">posterior_predict_choco</span><span class="op">(</span><span class="va">i</span>, <span class="va">prep</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">posterior_epred_choco</span><span class="op">(</span><span class="va">prep</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">log_lik_choco</span><span class="op">(</span><span class="va">i</span>, <span class="va">prep</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Number of simulated trials. Must be a positive integer.</p></dd>


<dt id="arg-p">p<a class="anchor" aria-label="anchor" href="#arg-p"></a></dt>
<dd><p>Proportion parameter determining the balance between the left and right sides
<em>after excluding</em> the probability mass at the threshold (<code>pmid</code>). Specifically,
<code>P(Right Side | Not Threshold) = p</code> and <code>P(Left Side | Not Threshold) = 1 - p</code>.
Must be in the range <code>[0, 1]</code>. Due to Stan requirement, this parameter is named <code>mu</code> in
brms models and is its primary parameter.</p></dd>


<dt id="arg-muleft">muleft<a class="anchor" aria-label="anchor" href="#arg-muleft"></a></dt>
<dd><p>Mean parameter for the underlying BEXT distribution used for the <em>left</em> side
(0 to <code>threshold</code>). This represents the central tendency of the <em>raw</em> BEXT component
(before mirroring and scaling). Must be strictly between 0 and 1.</p></dd>


<dt id="arg-mudelta">mudelta<a class="anchor" aria-label="anchor" href="#arg-mudelta"></a></dt>
<dd><p>Difference parameter modifying the mean for the <em>right</em> side BEXT distribution.
The mean of the raw BEXT component for the right side is calculated as
<code>inv_logit(logit(muleft) + mudelta)</code>. An <code>mudelta = 0</code> implies the raw means are the same.</p></dd>


<dt id="arg-phileft">phileft<a class="anchor" aria-label="anchor" href="#arg-phileft"></a></dt>
<dd><p>Precision parameter for the underlying BEXT distribution on the <em>left</em> side.
Must be positive. Note: This corresponds to half the typical Beta precision (<code>precision = phileft * 2</code>).
<code>phileft = 1</code> corresponds to a uniform distribution (when <code>muleft = 0.5</code>).</p></dd>


<dt id="arg-phidelta">phidelta<a class="anchor" aria-label="anchor" href="#arg-phidelta"></a></dt>
<dd><p>Difference parameter modifying the precision for the <em>right</em> side BEXT distribution.
The precision of the raw BEXT component for the right side is calculated as
<code>phiright = phileft * exp(phidelta)</code>. A <code>phidelta = 0</code> implies the precisions are the same.</p></dd>


<dt id="arg-pex">pex<a class="anchor" aria-label="anchor" href="#arg-pex"></a></dt>
<dd><p>Overall probability of extreme values (0 or 1) <em>within</em> each underlying BEXT component
(before scaling/mirroring). This applies commonly to both left and right sides. <code>0 &lt;= pex &lt;= 1</code>.</p></dd>


<dt id="arg-bex">bex<a class="anchor" aria-label="anchor" href="#arg-bex"></a></dt>
<dd><p>Balances the extreme probability mass <em>within</em> each underlying BEXT component
between its 0 and 1 anchors. <code>P(raw=1) = pex * bex</code>, <code>P(raw=0) = pex * (1 - bex)</code>.
Note that for the left CHOCO component, <code>raw=1</code> maps to CHOCO value 0, and for the right
CHOCO component, <code>raw=1</code> maps to CHOCO value 1. <code>0 &lt;= bex &lt;= 1</code>.</p></dd>


<dt id="arg-pmid">pmid<a class="anchor" aria-label="anchor" href="#arg-pmid"></a></dt>
<dd><p>Probability mass exactly at the <code>threshold</code>. <code>0 &lt;= pmid &lt;= 1</code>.</p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>The point dividing the scale into left and right components. Must be
strictly between 0 and 1.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Vector of quantiles (values at which to evaluate the density). Must be between 0 and 1, inclusive.</p></dd>


<dt id="arg-log">log<a class="anchor" aria-label="anchor" href="#arg-log"></a></dt>
<dd><p>Logical; if TRUE, returns the log-density.</p></dd>


<dt id="arg-link-mu-link-muleft-link-mudelta-link-phileft-link-phidelta-link-pex-link-bex-link-pmid">link_mu, link_muleft, link_mudelta, link_phileft, link_phidelta, link_pex, link_bex, link_pmid<a class="anchor" aria-label="anchor" href="#arg-link-mu-link-muleft-link-mudelta-link-phileft-link-phidelta-link-pex-link-bex-link-pmid"></a></dt>
<dd><p>Link functions for the parameters.</p></dd>


<dt id="arg-i-prep">i, prep<a class="anchor" aria-label="anchor" href="#arg-i-prep"></a></dt>
<dd><p>For brms' functions to run: index of the observation and a <code>brms</code> preparation object.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The simulation process involves three steps:</p><ol><li><p>Decide whether the outcome is exactly at the <code>threshold</code> (with probability <code>pmid</code>).</p></li>
<li><p>If not at the threshold, decide whether the outcome falls on the right side (with
conditional probability <code>p</code>) or the left side (with conditional probability <code>1-p</code>).</p></li>
<li><p>Simulate the value from the corresponding BEXT distribution:</p><ul><li><p><strong>Left Side (0 to <code>threshold</code>):</strong> Simulate <code>y_raw</code> from <code>rbext(mu=muleft, phi=phileft, pex=pex_left, bex=1)</code>.
The final value is <code>(1 - y_raw) * threshold</code>. Note <code>pex_left = (1-bex)*pex*2</code> and <code>bex=1</code> is used in <code>rbext</code>
to ensure the extreme mass corresponds to CHOCO value 0.</p></li>
<li><p><strong>Right Side (<code>threshold</code> to 1):</strong> Simulate <code>y_raw</code> from <code>rbext(mu=muright, phi=phiright, pex=pex_right, bex=1)</code>.
The final value is <code>threshold + y_raw * (1 - threshold)</code>. Note <code>pex_right = bex*pex*2</code> and <code>bex=1</code> is used
in <code>rbext</code> to ensure the extreme mass corresponds to CHOCO value 1.</p></li>
</ul></li>
</ol></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Kubinec, R. (2023). Ordered beta regression: a parsimonious, well-fitting model for continuous data with
lower and upper bounds. Political Analysis, 31(4), 519-536. (Describes the underlying ordered beta model)</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>rbext</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Simulate data with different parameterizations</span></span></span>
<span class="r-in"><span><span class="co"># 10% at threshold, 50/50 split otherwise, symmetric means/precisions</span></span></span>
<span class="r-in"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu">rchoco</span><span class="op">(</span>n<span class="op">=</span><span class="fl">5000</span>, p <span class="op">=</span> <span class="fl">0.5</span>, muleft <span class="op">=</span> <span class="fl">0.7</span>, mudelta <span class="op">=</span> <span class="fl">0</span>, phileft <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>  phidelta <span class="op">=</span> <span class="fl">0</span>, pex <span class="op">=</span> <span class="fl">0.1</span>, bex <span class="op">=</span> <span class="fl">0.5</span>, pmid <span class="op">=</span> <span class="fl">0.1</span>, threshold <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x1</span>, breaks <span class="op">=</span> <span class="fl">50</span>, main <span class="op">=</span> <span class="st">"CHOCO: Symmetric, pmid=0.1"</span>, xlab <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="rchoco-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># No threshold mass, 70% probability on right, different means/precisions</span></span></span>
<span class="r-in"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu">rchoco</span><span class="op">(</span>n<span class="op">=</span><span class="fl">5000</span>, p <span class="op">=</span> <span class="fl">0.7</span>, muleft <span class="op">=</span> <span class="fl">0.8</span>, mudelta <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, phileft <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  phidelta <span class="op">=</span> <span class="fl">0.5</span>, pex <span class="op">=</span> <span class="fl">0.05</span>, bex <span class="op">=</span> <span class="fl">0.7</span>, pmid <span class="op">=</span> <span class="fl">0</span>, threshold <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">x2</span>, breaks <span class="op">=</span> <span class="fl">50</span>, main <span class="op">=</span> <span class="st">"CHOCO: Asymmetric, pmid=0"</span>, xlab <span class="op">=</span> <span class="st">"y"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="rchoco-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span>  <span class="co"># Requires cmdstanr to be installed and configured</span></span></span>
<span class="r-in"><span>  <span class="va">logpdf_func</span> <span class="op">&lt;-</span> <span class="fu">choco_lpdf_expose</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># Note: parameter 'p' is now 'mu' in the Stan function</span></span></span>
<span class="r-in"><span>  <span class="fu">logpdf_func</span><span class="op">(</span>y <span class="op">=</span> <span class="fl">0.2</span>, mu <span class="op">=</span> <span class="fl">0.6</span>, muleft <span class="op">=</span> <span class="fl">0.3</span>, mudelta <span class="op">=</span> <span class="fl">0.1</span>, phileft <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>              phidelta <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span>, pex <span class="op">=</span> <span class="fl">0.1</span>, bex <span class="op">=</span> <span class="fl">0.5</span>, pmid <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu">logpdf_func</span><span class="op">(</span>y <span class="op">=</span> <span class="fl">0.5</span>, mu <span class="op">=</span> <span class="fl">0.6</span>, muleft <span class="op">=</span> <span class="fl">0.3</span>, mudelta <span class="op">=</span> <span class="fl">0.1</span>, phileft <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>              phidelta <span class="op">=</span> <span class="op">-</span><span class="fl">0.2</span>, pex <span class="op">=</span> <span class="fl">0.1</span>, bex <span class="op">=</span> <span class="fl">0.5</span>, pmid <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Example usage in brm formula:</span></span></span>
<span class="r-in"><span><span class="co"># bf(y ~ x1 + (1|group),</span></span></span>
<span class="r-in"><span><span class="co">#    muleft ~ 1,</span></span></span>
<span class="r-in"><span><span class="co">#    mudelta ~ x3,</span></span></span>
<span class="r-in"><span><span class="co">#    phileft ~ 1,</span></span></span>
<span class="r-in"><span><span class="co">#    phidelta ~ 1,</span></span></span>
<span class="r-in"><span><span class="co">#    pex ~ s(age),</span></span></span>
<span class="r-in"><span><span class="co">#    bex ~ 1,</span></span></span>
<span class="r-in"><span><span class="co">#    pmid ~ 1,</span></span></span>
<span class="r-in"><span><span class="co">#    family = choco())</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dominique Makowski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

